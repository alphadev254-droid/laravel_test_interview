{
    "info": {
        "_postman_id": "laravel-products-api",
        "name": "Laravel Products API - Complete",
        "description": "Complete API endpoints with admin/user testing and error examples",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8000/api/v1",
            "type": "string"
        },
        {
            "key": "admin_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "user_token",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "Auth",
            "item": [
                {
                    "name": "Login as Admin",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.collectionVariables.set(\"admin_token\", jsonData.data.token);",
                                    "    console.log('Admin logged in successfully');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "login"
                            ]
                        }
                    }
                },
                {
                    "name": "Login as Normal User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.collectionVariables.set(\"user_token\", jsonData.data.token);",
                                    "    console.log('Normal user logged in successfully');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "login"
                            ]
                        }
                    }
                },
                {
                    "name": "Login - Invalid Credentials (Error)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"wrong@example.com\",\n  \"password\": \"wrongpassword\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "login"
                            ]
                        },
                        "description": "Should return 422 with validation error"
                    }
                },
                {
                    "name": "Get Current User (Admin)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/me",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "me"
                            ]
                        }
                    }
                },
                {
                    "name": "Get Current User (Normal User)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/me",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "me"
                            ]
                        }
                    }
                },
                {
                    "name": "Logout (Admin)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/logout",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "logout"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Products - Admin",
            "description": "Product operations as Admin user",
            "item": [
                {
                    "name": "Get All Products",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products?page=1&per_page=15",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ],
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1"
                                },
                                {
                                    "key": "per_page",
                                    "value": "15"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Get Products - Filter by Category",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products?filter[category]=beauty",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ],
                            "query": [
                                {
                                    "key": "filter[category]",
                                    "value": "beauty"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Get Products - Search",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products?filter[search]=product",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ],
                            "query": [
                                {
                                    "key": "filter[search]",
                                    "value": "product"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Get Products - With Creator",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products?include=creator",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ],
                            "query": [
                                {
                                    "key": "include",
                                    "value": "creator"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Get Single Product",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products/1",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products",
                                "1"
                            ]
                        }
                    }
                },
                {
                    "name": "Create Product (Admin)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"New Product by Admin\",\n  \"description\": \"This is a test product created by admin\",\n  \"category\": \"electronics\",\n  \"price\": 99.99,\n  \"discount_percentage\": 10.00,\n  \"rating\": 4.5,\n  \"stock\": 50\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ]
                        },
                        "description": "Admin can create products - should return 201"
                    }
                },
                {
                    "name": "Update Product (Admin)",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Updated by Admin\",\n  \"description\": \"Updated description\",\n  \"category\": \"beauty\",\n  \"price\": 49.99,\n  \"stock\": 100\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products/1",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products",
                                "1"
                            ]
                        },
                        "description": "Admin can update any product"
                    }
                },
                {
                    "name": "Delete Product (Admin)",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products/2",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products",
                                "2"
                            ]
                        },
                        "description": "Admin can delete products"
                    }
                },
                {
                    "name": "Upload Thumbnail (Admin)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "thumbnail",
                                    "type": "file",
                                    "src": "public/61EMsb5lGLL.jpg"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/products/1/thumbnail",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products",
                                "1",
                                "thumbnail"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Products - Normal User (Test Restrictions)",
            "description": "Test authorization restrictions with normal user",
            "item": [
                {
                    "name": "Get All Products (User)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ]
                        },
                        "description": "Normal user CAN view products"
                    }
                },
                {
                    "name": "Create Product (User) - FORBIDDEN",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Trying to Create as User\",\n  \"description\": \"This should fail\",\n  \"category\": \"test\",\n  \"price\": 10.00,\n  \"stock\": 5\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ]
                        },
                        "description": "Should return 403 - Only admin can create"
                    }
                },
                {
                    "name": "Update Product (User) - FORBIDDEN",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Trying to Update as User\",\n  \"description\": \"This should fail\",\n  \"category\": \"test\",\n  \"price\": 10.00,\n  \"stock\": 5\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products/1",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products",
                                "1"
                            ]
                        },
                        "description": "Should return 403 - User is not creator or admin"
                    }
                },
                {
                    "name": "Delete Product (User) - FORBIDDEN",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products/1",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products",
                                "1"
                            ]
                        },
                        "description": "Should return 403 - Only admin can delete"
                    }
                }
            ]
        },
        {
            "name": "Error Examples",
            "description": "Examples of error responses",
            "item": [
                {
                    "name": "Unauthorized - No Token",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/products",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ]
                        },
                        "description": "Should return 401 - Unauthenticated"
                    }
                },
                {
                    "name": "Validation Error - Missing Fields",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Missing required fields\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/products",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products"
                            ]
                        },
                        "description": "Should return 422 - Validation errors"
                    }
                },
                {
                    "name": "Not Found - Invalid Product ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/products/99999",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "products",
                                "99999"
                            ]
                        },
                        "description": "Should return 404 - Product not found"
                    }
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "pm.request.headers.add({",
                    "    key: \"Accept\",",
                    "    value: \"application/json\"",
                    "});"
                ]
            }
        }
    ]
}